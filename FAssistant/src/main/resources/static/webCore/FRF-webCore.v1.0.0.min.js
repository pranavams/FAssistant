"use strict";angular.module("WebCoreModule",["pascalprecht.translate","ui.router","ngTouch","ui.bootstrap","ui.mask","ui.select","angularGrid","ui.grid","ui.grid.selection","ui.grid.pagination","ui.grid.edit","ui.grid.infiniteScroll","smart-table"]),angular.module("WebCoreModule").constant("_",window._),angular.module("WebCoreModule").constant("Constants",{local:"local",wslBaseUrl:"https://www.wsl.ford.com/login.cgi?portstripping=no&back=",authorization:{any:"Any",all:"All"},version:"Ford Responsive Framework (FRF) 1.0.0"}),jQuery.fn.exists=function(){return 0!==this.length},jQuery.fn.outerHTML=function(){return jQuery("<div>").append(this.eq(0).clone()).html()},angular.merge=function(dst){return angular.forEach(arguments,function(obj){obj!==dst&&angular.forEach(obj,function(value,key){dst[key]&&dst[key].constructor&&dst[key].constructor===Object?angular.merge(dst[key],value):dst[key]=value})}),dst},angular.module("WebCoreModule").service("WcAlertConsoleService",["$timeout","_","$interval",function($timeout,_,$interval){this.configureDefaults=function(config){config&&(void 0===config.visible||1!=config.visible&&0!=config.visible||(visibleDefault=config.visible),void 0===config.multiple||1!=config.multiple&&0!=config.multiple||(multipleDefault=config.multiple),void 0===config.persist||1!=config.persist&&0!=config.persist||(persistDefault=config.persist),void 0!==config.timeout&&"NaN"!=config.parseInt(timeout)&&(timeoutDefault=config.timeout),!config.errorOnStateChange||1!=config.errorOnStateChange&&0!=config.errorOnStateChange||(removeErrorOnStateChange=config.errorOnStateChange))};var visibleDefault=!0,multipleDefault=!0,persistDefault=!1,timeoutDefault=7,fadeOutAnimationLengthMS=350,removeErrorOnStateChange=!0;this.getSettings=function(){var settings={visible:visibleDefault,multiple:multipleDefault,persist:persistDefault,timeout:timeoutDefault,fadeOutAnimationLengthMS:fadeOutAnimationLengthMS,removeErrorOnStateChange:removeErrorOnStateChange};return settings};var messages=[];this.isMessageDuplicate=function(msg){for(var isDuplicate=!1,i=0;i<messages.length;i++)messages[i].message===msg&&(isDuplicate=!0);return isDuplicate},this.addMessage=function(messageInstance){messageInstance&&(void 0==messageInstance.visible&&(messageInstance.visible=visibleDefault),void 0==messageInstance.multiple&&(messageInstance.multiple=multipleDefault),void 0==messageInstance.persist&&(messageInstance.persist=persistDefault),void 0==messageInstance.timeout&&(messageInstance.timeout=timeoutDefault));var uniqueishID=_.uniqueId("alert_");messageInstance.uniqueishID=uniqueishID,"danger"===messageInstance.type&&(messageInstance.persist=!0),0==messageInstance.multiple?this.isMessageDuplicate(messageInstance.message)||messages.push(messageInstance):messages.push(messageInstance),messageInstance.persist===!1&&($interval(function(){for(var f=0;f<messages.length;f++)messages[f].uniqueishID===messageInstance.uniqueishID&&(messages[f].fadeOut=!0)},1e3*messageInstance.timeout-fadeOutAnimationLengthMS,1),$interval(angular.bind(this,function(){this.removeMessage(messageInstance.uniqueishID)}),1e3*messageInstance.timeout,1),$interval(angular.bind(this,function(){this.updateTimeout(messageInstance.uniqueishID)}),1e3,messageInstance.timeout))},this.updateTimeout=function(uniqueishID){for(var i=0;i<messages.length;i++)messages[i].uniqueishID===uniqueishID&&messages[i].timeout--},this.removeMessage=function(uniqueishID,manualFade){for(var i=0;i<messages.length;i++)if(messages[i].uniqueishID===uniqueishID)return manualFade?(messages[i].fadeOut=!0,void $timeout(angular.bind(this,function(){this.removeMessage(uniqueishID)}),fadeOutAnimationLengthMS)):void messages.splice(i,1)},this.removeMessages=function(includingPersistent){for(var i=0;i<messages.length;i++)(messages[i].persist===!1||includingPersistent===!0)&&(messages.splice(i,1),i-=1)},this.removeErrorMessages=function(){for(var i=0;i<messages.length;i++)"danger"===messages[i].type&&(messages.splice(i,1),i-=1)},this.getMessages=function(onlyVisible){for(var messagesToReturn=[],i=0;i<messages.length;i++)(onlyVisible===!0&&messages[i].visible===!0||void 0===onlyVisible)&&messagesToReturn.push(messages[i]);return messagesToReturn},this.getMessagesByType=function(typeToMatch){for(var messagesToReturn=[],i=0;i<messages.length;i++)messages[i].type===typeToMatch&&messagesToReturn.push(messages[i]);return messagesToReturn}}]),angular.module("WebCoreModule").service("WcAuthorizationCacheHelper",["_","$q","$window",function(_,$q,$window){this.setSessionCache=function(){$window.sessionStorage.policyCache=angular.toJson(this.cache)},this.getSessionCache=function(){return angular.fromJson($window.sessionStorage.policyCache)},this.cache=this.getSessionCache(),this.cache||(this.cache=[]),this.resetCache=function(){this.cache=[]},this.retrievePolicyAuthorization=function(formattedPolicy){var foundPolicy=_.findWhere(this.cache,{policy:formattedPolicy});return void 0!==foundPolicy?foundPolicy.promise&&foundPolicy.promise.then?foundPolicy.promise.then(function(resolved){return resolved.authorized}):$q.when(foundPolicy.authorized):null},this.formatPolicy=function(name,promiseOrData){if(promiseOrData.then){promiseOrData.then(angular.bind(this,function(resolvedPolicy){var policyLocation;for(policyLocation=0;policyLocation<this.cache.length&&this.cache[policyLocation].policy!=name;policyLocation++);this.cache[policyLocation]=this.formatPolicy(name,resolvedPolicy),this.setSessionCache()}));var cachePolicy={};return cachePolicy.policy=name,cachePolicy.promise=promiseOrData,cachePolicy}var localPolicy=angular.copy(promiseOrData);return localPolicy.policy=name,delete localPolicy.resource,delete localPolicy.action,localPolicy},this.addPolicy=function(policyName,policyPromise){this.cache.push(this.formatPolicy(policyName,policyPromise)),this.setSessionCache()}}]),angular.module("WebCoreModule").service("WcAuthorizationService",["WcHttpEndpointPrototype","WcAuthorizationCacheHelper","_","$q","Constants","$state",function(WcHttpEndpointPrototype,WcAuthorizationCacheHelper,_,$q,Constants,$state){this.authorizationEndpoint=new WcHttpEndpointPrototype("authorization"),this.requestAuthorization=function(name){WcAuthorizationCacheHelper.addPolicy(name,this.authorizationEndpoint.get({params:{authorizationString:name}}).then(function(response){return response[0]}))},this.isAuthorizedFromCache=function(policy){return WcAuthorizationCacheHelper.retrievePolicyAuthorization(policy)},this.isStateAuthorized=function(stateName){var state=$state.get(stateName),policies=null,criteria=null;return state.data&&(policies=state.data.policies?state.data.policies:null,criteria=state.data.criteria?state.data.criteria:null),policies?(policies&&!criteria&&(criteria=Constants.authorization.all),this.isAuthorized(policies,criteria)):$q.when(!0)},this.isAuthorized=function(policySet,criteria){criteria||(criteria=Constants.authorization.all),angular.isArray(policySet)||(policySet=[policySet]);var authorizations=[];return _.each(policySet,angular.bind(this,function(policy){var isCached=this.isAuthorizedFromCache(policy);null===isCached&&(this.requestAuthorization(policy),isCached=this.isAuthorizedFromCache(policy)),authorizations.push(isCached)})),$q.all(authorizations).then(function(arrayOfAuths){switch(criteria){case"Any":return _.some(arrayOfAuths);case"All":return _.every(arrayOfAuths);default:return!1}})}}]),angular.module("WebCoreModule").service("WcWebtrendsService",["$rootScope","$window","$state","$timeout",function($rootScope,$window,$state,$timeout){this._enabled=!1,this.enable=function(){this._enabled=!0},this.trackData=function(){var uri,urlPart;return""!==$window.location.hash&&(urlPart=$window.location.hash+$window.location.search),uri=urlPart&&urlPart.replace("#/","")!==$state.$current.name?urlPart+":"+$state.$current.name:urlPart,uri||(uri=":"+$state.$current.name),$window.dcsMultiTrack("DCS.dcsuri",uri),uri},$rootScope.$on("$stateChangeSuccess",angular.bind(this,function(){this._enabled&&$window.dcsMultiTrack&&$timeout(angular.bind(this,function(){$rootScope.$apply(),this.trackData()}))}))}]),angular.module("WebCoreModule").service("WcHttpRequestService",["$rootScope","$q","$http","$window","$timeout",function($rootScope,$q,$http,$window,$timeout){this.configuration={xsrfCookieName:"WSL-credential",withCredentials:!0,headers:{},timeout:1e4,baseUrl:"",cache:!1,pingTrustPeriodMS:1e3,unAuthenticatedCallback:function(){}},this.configureDefaults=function(config){angular.extend(this.configuration,config)},this.requestConfigurationMapper=function(config){var httpConfig=angular.copy(this.configuration);return delete httpConfig.baseUrl,delete httpConfig.pingTrustPeriodMS,delete httpConfig.unAuthenticatedCallback,angular.extend(httpConfig,config),delete httpConfig.cache,httpConfig},this.urlBuilder=function(url){return url.indexOf("http://")>-1||url.indexOf("https://")>-1?url:this.configuration.baseUrl+url},this.get=function(url,config){var interceptedParams=this.triggerRequestInterceptors(url,null,config);if(url=interceptedParams.url,config=interceptedParams.config,config&&config.cache&&!config.alwaysRefresh&&!config.forceRefresh){var cachedData;if("localStorage"==config.cache?cachedData=this.getFromLocalStorage(url):"sessionStorage"==config.cache&&(cachedData=this.getFromSessionStorage(url)),cachedData)return $q.when(cachedData)}return $http.get(this.urlBuilder(url),this.requestConfigurationMapper(config)).then(angular.bind(this,function(response){return response=this.triggerResponseInterceptors(response),config&&("localStorage"==config.cache?this.storeInLocalStorage(url,response.data):"sessionStorage"==config.cache&&this.storeInSessionStorage(url,response.data)),response.data}),angular.bind(this,function(error){return this.triggerErrorInterceptors(error),this.getNetworkState().then(angular.bind(this,function(state){if("offline"==state&&config){var cachedData;return"localStorage"==config.cache?cachedData=this.getFromLocalStorage(url):"sessionStorage"==config.cache&&(cachedData=this.getFromSessionStorage(url)),cachedData?$q.when(cachedData)["finally"](function(){$timeout(function(){$rootScope.$broadcast("Offline")})}):$q.reject("Offline: No cached data available!")}return $q.reject(error)}))}))},this.post=function(url,data,config){var interceptedParams=this.triggerRequestInterceptors(url,data,config);return url=interceptedParams.url,data=interceptedParams.data,config=interceptedParams.config,$http.post(this.urlBuilder(url),data,this.requestConfigurationMapper(config)).then(angular.bind(this,function(response){return response=this.triggerResponseInterceptors(response),{data:response.data,status:response.status}}),angular.bind(this,function(error){return this.triggerErrorInterceptors(error),$q.reject(error)}))},this.put=function(url,data,config){var interceptedParams=this.triggerRequestInterceptors(url,data,config);return url=interceptedParams.url,data=interceptedParams.data,config=interceptedParams.config,$http.put(this.urlBuilder(url),data,this.requestConfigurationMapper(config)).then(angular.bind(this,function(response){return response=this.triggerResponseInterceptors(response),{data:response.data,status:response.status}}),angular.bind(this,function(error){return this.triggerErrorInterceptors(error),$q.reject(error)}))},this["delete"]=function(url,config){var interceptedParams=this.triggerRequestInterceptors(url,null,config);return url=interceptedParams.url,config=interceptedParams.config,$http["delete"](this.urlBuilder(url),this.requestConfigurationMapper(config)).then(angular.bind(this,function(response){return response=this.triggerResponseInterceptors(response),{data:response.data,status:response.status}}),angular.bind(this,function(error){return this.triggerErrorInterceptors(error),$q.reject(error)}))},this.getFromLocalStorage=function(key){var cachedData=$window.localStorage.getItem(key);try{cachedData=angular.fromJson(cachedData)}finally{return cachedData}},this.getFromSessionStorage=function(key){var cachedData=$window.sessionStorage.getItem(key);try{cachedData=angular.fromJson(cachedData)}finally{return cachedData}},this.storeInLocalStorage=function(key,value){angular.isString(value)||(value=angular.toJson(value)),$window.localStorage.setItem(key,value)},this.storeInSessionStorage=function(key,value){angular.isString(value)||(value=angular.toJson(value)),$window.sessionStorage.setItem(key,value)},this.requestInterceptors=[],this.responseInterceptors=[],this.errorInterceptors=[],this.addRequestInterceptor=function(interceptor){this.requestInterceptors.push(interceptor)},this.triggerRequestInterceptors=function(url,data,config){for(var index=0;index<this.requestInterceptors.length;){var newParms=this.requestInterceptors[index](url,data,config);newParms&&(newParms.url&&(url=newParms.url),newParms.data&&(data=newParms.data),newParms.config&&(config=newParms.config)),index++}return{url:url,data:data,config:config}},this.addResponseInterceptor=function(interceptor){this.responseInterceptors.push(interceptor)},this.triggerResponseInterceptors=function(response){for(var index=0;index<this.responseInterceptors.length;){var newResponse=this.responseInterceptors[index](response);newResponse&&(response=newResponse),index++}return response},this.addErrorInterceptor=function(interceptor){this.errorInterceptors.push(interceptor)},this.triggerErrorInterceptors=function(error){for(var index=0;index<this.errorInterceptors.length;)this.errorInterceptors[index](error),index++},this._lastPingRequestTimestamp=0,this._trustedResponse="",this._pendingRequests=0,this._currentPingRequestPromise={},this._networkStatusResponses=["online","unauthenticated","offline"],this.getNetworkState=function(){if(this._pendingRequests>0)return this._currentPingRequestPromise;var currentTime=new Date;return currentTime-this._lastPingRequestTimestamp>this.configuration.pingTrustPeriodMS?(this._pendingRequests++,this._lastPingRequestTimestamp=currentTime,this._trustedResponse="",this._currentPingRequestPromise=$http.get(this.urlBuilder("unprotected/ping")).then(angular.bind(this,function(){return this._pendingRequests--,this._currentPingRequestPromise={},this._trustedResponse=this._networkStatusResponses[1],this.configuration.unAuthenticatedCallback(),$rootScope.$broadcast("Unauthenticated"),$q.when(this._networkStatusResponses[1])}),angular.bind(this,function(){return this._pendingRequests--,this._currentPingRequestPromise={},this._trustedResponse=this._networkStatusResponses[2],$rootScope.$broadcast("Offline"),$q.when(this._networkStatusResponses[2])})),this._currentPingRequestPromise):$q.when(this._trustedResponse)}}]),angular.module("WebCoreModule").provider("WcTranslateConfiguratorService",["$translateProvider",function($translateProvider){this.translateProvider=$translateProvider,this.configuration={loader:"$translatePartialLoader",loaderObj:{urlTemplate:"translations/{lang}/{part}.json"},langKeyArray:["en","zh","ru"],langKeyObj:{"en_*":"en","en-*":"en",zh_CN:"zh",zh_HK:"zh",ru_RU:"ru"},fallbackLang:"en"},this.configureTranslateService=function(config){config&&angular.extend(this.configuration,config),$translateProvider.useLoader(this.configuration.loader,this.configuration.loaderObj),$translateProvider.registerAvailableLanguageKeys(this.configuration.langKeyArray,this.configuration.langKeyObj),$translateProvider.determinePreferredLanguage(),$translateProvider.fallbackLanguage(this.configuration.fallbackLang),$translateProvider.use($translateProvider.preferredLanguage())},this.$get=["$translate","$translatePartialLoader",function($translate,$translatePartialLoader){return this.loadPartAndRefresh=function(partString){$translatePartialLoader.addPart(partString),$translate.refresh()},this}]}]),angular.module("WebCoreModule").factory("WcHttpEndpointPrototype",["WcHttpRequestService",function(WcHttpRequestService){function Endpoint(route,baseURL){this.baseUrl=baseURL,this.route=route,baseURL&&(this.route=this.baseUrl+this.route)}return Endpoint.prototype={subRoute:function(id){return new Endpoint(this.route+"/"+id)},get:function(options){return WcHttpRequestService.get(this.route,options)},post:function(data,options){return WcHttpRequestService.post(this.route,data,options)},put:function(id,data,options){return WcHttpRequestService.put(this.route+"/"+id,data,options)},"delete":function(id,options){return WcHttpRequestService["delete"](this.route+"/"+id,options)}},Endpoint}]),angular.module("WebCoreModule").factory("WcDateRangePickerPrototype",["$rootScope",function($rootScope){function WcDateRangePickerPrototype(config){var startDate,endDate,minDate,maxDate,startDateFieldName,endDateFieldName,form;config&&(startDate=config.startDate?config.startDate:null,endDate=config.endDate?config.endDate:null,minDate=config.minDate?config.minDate:null,maxDate=config.maxDate?config.maxDate:null,startDateFieldName=config.startDateFieldName?config.startDateFieldName:null,endDateFieldName=config.endDateFieldName?config.endDateFieldName:null,form=config.form?config.form:null),this.isStartDateOpen=!1,this.isEndDateOpen=!1,this.load(startDate,endDate,minDate,maxDate),$rootScope.$watch(angular.bind(this,function(){return this.startDate}),angular.bind(this,function(newValue){this.minEndDate=newValue?newValue:this.minDate})),$rootScope.$watch(angular.bind(this,function(){return this.endDate}),angular.bind(this,function(newValue){this.maxStartDate=newValue?newValue:this.maxDate})),form&&startDateFieldName&&endDateFieldName?$rootScope.$watch(function(){var dateDisabledArray=form.$error["date-disabled"];return dateDisabledArray?dateDisabledArray.length:0},angular.bind(this,function(newVal){var dateDisabledArray=form.$error["date-disabled"];if(newVal>0)for(var i=0;i<dateDisabledArray.length;i++)dateDisabledArray[i].$viewValue==form[startDateFieldName].$viewValue?form[startDateFieldName].$setValidity("dateRange",!dateDisabledArray[i].$error["date-disabled"]):form[endDateFieldName].$setValidity("dateRange",!dateDisabledArray[i].$error["date-disabled"]);else form[startDateFieldName].$setValidity("dateRange",!0),form[endDateFieldName].$setValidity("dateRange",!0)})):console.log("The DateRangePicker cannot support validation indicators without having been provided the formObj and the field names.")}return WcDateRangePickerPrototype.prototype.load=function(startDate,endDate,minDate,maxDate){this.startDate=startDate||null,this.endDate=endDate||null,this.minDate=minDate||null,this.maxDate=maxDate||null,this.minStartDate=this.minDate,this.maxStartDate=this.endDate?this.endDate:this.maxDate,this.minEndDate=this.startDate?this.startDate:this.minDate,this.maxEndDate=this.maxDate},WcDateRangePickerPrototype.prototype.openStartDate=function($event){$event.preventDefault(),$event.stopPropagation(),this.isStartDateOpen===!0?this.isStartDateOpen=!1:(this.isStartDateOpen=!0,this.isEndDateOpen=!1)},WcDateRangePickerPrototype.prototype.openEndDate=function($event){$event.preventDefault(),$event.stopPropagation(),this.isEndDateOpen===!0?this.isEndDateOpen=!1:(this.isEndDateOpen=!0,this.isStartDateOpen=!1)},WcDateRangePickerPrototype}]),angular.module("WebCoreModule").directive("wcPageTitle",function(){return{restrict:"A",controller:["$scope","$state","$compile",function($scope,$state,$compile){var firstRun=!0;$scope.pageTitle="",this.cleanUpName=function(name){var cleanName=name;return cleanName=cleanName.replace(/-/g," "),cleanName=cleanName.replace(/\b./g,function(m){return m.toUpperCase()})},this.updatePageTitle=function(){var parentStateName,appName=$("#ng-app").attr("ng-app").replace("Module",""),stateName=this.cleanUpName($state.$current.name);$state.$current.parent&&(parentStateName=this.cleanUpName($state.get($state.$current.parent).name));var tempPageTitle;tempPageTitle=parentStateName&&parentStateName.replace(/ /g,"")!=appName?parentStateName+": "+stateName+" | "+appName:stateName+" | "+appName,$scope.pageTitle=tempPageTitle},$scope.$on("$viewContentLoaded",angular.bind(this,function(){if(firstRun){var titleTag=$("title").attr({"wc-page-title":"","ng-bind":"pageTitle"});titleTag.replaceWith($compile(titleTag)($scope)),firstRun=!1}this.updatePageTitle()}))}]}}),angular.module("WebCoreModule").directive("required",function(){return{restrict:"A",controller:["WcTranslateConfiguratorService","$compile",function(WcTranslateConfiguratorService,$compile){this.WcTranslateConfiguratorService=WcTranslateConfiguratorService,this.compile=$compile}],link:function(scope,elem,attrs,ctrl){var insertionPoint=$('label[for="'+attrs.id+'"]');("checkbox"==elem[0].type||"radio"==elem[0].type)&&(insertionPoint=elem.closest("fieldset").find("legend")),0==insertionPoint.has('abbr[title="Required"]').length&&insertionPoint.prepend('<abbr class="required h6" title="Required">*</abbr>');var formElem=insertionPoint.closest("form");0==formElem.has("div.required-legend").length&&(ctrl.WcTranslateConfiguratorService.loadPartAndRefresh("WC-required"),formElem.prepend(ctrl.compile('<div class="required-legend"><span class="required-text"><abbr class="required h6" title="Required">*</abbr> {{"required.requiredText" | translate}}</span></div>')(scope)))}}}),angular.module("WebCoreModule").directive("wcAlertConsole",function(){return{restrict:"A",templateUrl:"webCore/directives/wcAlertConsoleDirective/wcAlertConsoleDirectiveTemplate.html",replace:!1,controller:["$scope","WcAlertConsoleService","$timeout",function($scope,WcAlertConsoleService,$timeout){$scope.visibleMessages=[],$scope.closeAlert=function(uniqueishID){WcAlertConsoleService.removeMessage(uniqueishID,!0)},WcAlertConsoleService.getSettings().removeErrorOnStateChange&&$scope.$on("$stateChangeStart",function(){WcAlertConsoleService.removeErrorMessages()}),$scope.$watch(function(){var messages=WcAlertConsoleService.getMessages(!0);return messages},function(newMsgs,oldMsgs){$scope.visibleMessages=newMsgs,$timeout(function(){if(newMsgs.length>oldMsgs.length){var userYpos=$(document).scrollTop(),msgYpos=$("div.alert").last().offset();msgYpos=msgYpos.top-15,userYpos>msgYpos&&$("html, body").animate({scrollTop:msgYpos},100)}},0)},!0)}]}}),angular.module("WebCoreModule").directive("wcProtectedResource",function(){return{restrict:"A",require:["wcProtectedResource","?^wcDataTable"],controller:["WcAuthorizationService","$element","$attrs",function(WcAuthorizationService,$element,$attrs){this.checkAuthorization=function(){var criteria=null,policies=$attrs.wcProtectedResource;if(policies){policies.indexOf("|")>-1&&(criteria=policies.slice(policies.indexOf("|")+1,policies.length).toString().trim()),criteria&&(policies=policies.slice(0,policies.indexOf("|"))),policies=policies.split(",");for(var i=0;i<policies.length;i++)policies[i]=policies[i].trim()}else policies=[];var isAuth=WcAuthorizationService.isAuthorized(policies,criteria);isAuth.then(function(authorized){authorized===!1&&$element.remove()})}}],compile:function(){return{post:function(){var controllers=arguments[3],protectedResourceCtrl=controllers[0],datatableCtrl=controllers[1];datatableCtrl&&(datatableCtrl.checkAuthorization=protectedResourceCtrl.checkAuthorization()),protectedResourceCtrl.checkAuthorization()}}}}}),angular.module("WebCoreModule").directive("wcCheckAllNone",function(){return{restrict:"AE",require:"?^datatable",scope:{targetContainerId:"@targetContainerId"},template:'<a class="select-all" href="javascript:;" ng-click="checkAll()">{{"actions.selectAll" | translate}}</a> | <a class="select-none" href="javascript:;" ng-click="checkNone()">{{"actions.selectNone"| translate}}</a>',controller:["$scope",function($scope){$scope.toggleCheckAllExists=!1,$scope.setToggleCheckAllExists=function(exists){$scope.toggleCheckAllExists=exists},$scope.getToggleCheckAllExists=function(){return $scope.toggleCheckAllExists},$scope.checkAll=function(){!$("#"+$scope.targetContainerId+" input.toggle-check-all").prop("checked")&&$scope.getToggleCheckAllExists()?($("#"+$scope.targetContainerId+" input.toggle-check-all").click(),console.log("CLICKING TOGGLE CHECK ALL")):$("#"+$scope.targetContainerId).find('input[type="checkbox"]:not(.toggle-check-all)').each(function(){var item=arguments[1],$item=$(item);$item.prop("checked")||$item.click()})},$scope.checkNone=function(){$("#"+$scope.targetContainerId+" input.toggle-check-all").prop("checked")&&$scope.getToggleCheckAllExists()?($("#"+$scope.targetContainerId+" input.toggle-check-all").click(),console.log("un-CLICKING TOGGLE CHECK ALL")):$("#"+$scope.targetContainerId).find('input[type="checkbox"]:not(.toggle-check-all)').each(function(){var item=arguments[1],$item=$(item);$item.prop("checked")&&$item.click()})}}],link:["$scope","iElement","iAttrs","datatableController",function(){var $scope=arguments[0],datatableController=arguments[3];datatableController&&$scope.setToggleCheckAllExists(datatableController.getToggleCheckAllExists())}]}}),angular.module("WebCoreModule").directive("wcDataTable",["$compile","$window","_",function($compile,$window,_){return{restrict:"A",require:["wcDataTable","?ngModel"],scope:{headerTemplate:"@headerTemplate",overrideOptions:"@wcDataTable",columns:"=columns",columnDefs:"@columnDefs",responsiveColumnDefs:"@responsiveColumnDefs",data:"=data",checkBoxCol:"@checkBoxCol",radioButtonCol:"@radioButtonCol",selectedValue:"@selectedValue",ngModel:"=ngModel",name:"@name"},transclude:!0,replace:!0,template:"<div ng-transclude></div>",controller:["$compile","$scope","$element","$attrs","WcDataTableService",function($compile,$scope,$element,$attrs,WcDataTableService){this.defaultOptions={bAutoWidth:!1,bStateSave:!1,bPaginate:!0,sPaginationType:"bootstrap_full_numbers",sDom:'<"row paginator paginator-top"<"col-xs-3"l><"col-xs-4 text-right"i><"col-xs-5 text-right"p>>t<"row paginator paginator-bottom"<"col-xs-3"l><"col-xs-4 text-right"i><"col-xs-5 text-right"p>>>',bLengthChange:!0,bFilter:!1,bDestroy:!0,fnCreatedRow:function(row,data,dataIndex){var theRow=$(row)[0],theCells=$(theRow).find("td"),cellWithLinks=$($(theCells)[0]);$(theRow).find("a").on("click",angular.bind(this,function(){WcDataTableService.setClickedRowData($scope.data[dataIndex])})),$compile(cellWithLinks.contents())($scope.$parent)},aaSorting:[[2,"asc"]]},this.options={},this.useResponsiveColumns=!1,this.currentBreakpoint=-1,this.previousBreakPoint=-1,this.toggleCheckAll=$scope.checkBoxCol==parseInt($scope.checkBoxCol),this.checkAuthorization=function(){},this.getToggleCheckAllExists=function(){return this.toggleCheckAll},this.initialize=function(ngModelController){$window.alert=function(){var nativeAlert=$window.alert;return function(message){$window.alert=nativeAlert,0===message.indexOf("DataTables warning")?console.warn(message):nativeAlert(message)}}(),this.table=$element.find("table");var options={};if($scope.overrideOptions&&(options=$scope.$eval($scope.overrideOptions)),$scope.columns&&(options.aoColumns=angular.copy($scope.columns)),this.showcheckBoxColumn=$scope.checkBoxCol==parseInt($scope.checkBoxCol),this.showRadioColumn=$scope.radioButtonCol==parseInt($scope.radioButtonCol),this.inValidCombination=this.showcheckBoxColumn&&this.showRadioColumn,this.hasInputField=this.showcheckBoxColumn||this.showRadioColumn,this.inValidCombination){var errorMessage="YOU CANNOT HAVE A DATATABLE WITH BOTH A CHECKBOX COLUMN AND A RADIOBUTTON COLUMN - IT MESSES WITH THE DATA";return console.error(errorMessage),$element.prepend('<div class="alert alert-danger"><td colspan=""><p>'+errorMessage+"</p></div>"),!1}var requiredString=$attrs.required?"required":"",inputName=$scope.name?'name="'+$scope.name+'"':"";if(this.hasInputField&&!$attrs.ngModel){var errorMessage='Must define the "ng-model" attribute IF a checkbox or radio column index is defined.';console.error(errorMessage),$element.prepend('<div class="alert alert-danger"><td colspan=""><p>'+errorMessage+"</p></div>")}if(this.hasInputField&&!inputName){var errorMessage='Must define the "name" attribute IF a checkbox or radio column index is defined.';console.error(errorMessage),$element.prepend('<div class="alert alert-danger"><td colspan=""><p>'+errorMessage+"</p></div>")}if(this.hasInputField&&!$scope.selectedValue){var errorMessage='Must define the "selected-value" attribute IF a checkbox or radio column index is defined.';console.error(errorMessage),$element.prepend('<div class="alert alert-danger"><td colspan=""><p>'+errorMessage+"</p></div>")}if(!this.hasInputField&&requiredString){var errorMessage="Must define a checkbox or radio column index IF the HTML5 required attribute is set";console.error(errorMessage),$element.prepend('<div class="alert alert-danger"><td colspan=""><p>'+errorMessage+"</p></div>")}if(this.showcheckBoxColumn){var checkBoxCol={sTitle:'<input type="checkbox" class="toggle-check-all"/>',sClass:"text-center",mData:$scope.selectedValue,mRender:function(data,type,full){return angular.toJson(data)==angular.toJson(full[$scope.selectedValue])&&-1==new String(full[$scope.selectedValue]).indexOf("<label")?'<label class="sr-only" for="checkbox_'+full[$scope.selectedValue]+'">Select '+full[$scope.selectedValue]+'</label><input type="checkbox" id="checkbox_'+full[$scope.selectedValue]+'" '+inputName+" "+requiredString+' class="checkbox table-check-box" value="'+full[$scope.selectedValue]+'"/>':data},bSortable:!1};angular.toJson(options.aoColumns[$scope.checkBoxCol])!=angular.toJson(checkBoxCol)&&options.aoColumns.splice($scope.checkBoxCol,0,checkBoxCol),$(this.table).addClass("table-toggle-check-all")}if(this.showRadioColumn){var radioButtonCol={sTitle:"",sClass:"text-center",mData:$scope.selectedValue,mRender:function(data){return data?'<label class="sr-only" for="radio_'+data+'">Select '+data+'</label><input type="radio" id="radio_'+data+'" '+inputName+" "+requiredString+' class="radio table-radio-button" value="'+data+'"/>':""},bSortable:!1};angular.toJson(options.aoColumns[$scope.radioButtonCol])!=angular.toJson(radioButtonCol)&&options.aoColumns.splice($scope.radioButtonCol,0,radioButtonCol)}if($scope.columnDefs&&(options.aoColumnDefs=$scope.$eval($scope.columnDefs)),$scope.responsiveColumnDefs){if(this.responsiveColumnDefs=$scope.$eval($scope.responsiveColumnDefs),void 0===this.responsiveColumnDefs.initial)throw"DataTables Error: No initial state defined.";this.useResponsiveColumns=!0,this.maxBreakpoint=_.max(this.responsiveColumnDefs.breakpoints)}return this.defineTable(options),$scope.data&&(this.dataTable.fnAddData($scope.data),$scope.$watch(function(){return $scope.data},angular.bind(this,function(oldVal,newVal){oldVal!=newVal&&(this.defineTable(this.options),this.dataTable.fnClearTable(),this.dataTable.fnAddData($scope.data),this.createInputColumn(ngModelController))}))),this.createInputColumn=function(ngModelController){var jqTable=$(this.table);if(this.showRadioColumn){var rows=this.table.fnGetNodes();$scope.$parent.$eval($attrs.ngModel)&&($(rows).find("input[id=radio_"+$scope.$parent.$eval($attrs.ngModel)+"]").prop("checked",!0),$(rows).find("input[id=radio_"+$scope.$parent.$eval($attrs.ngModel)+"]").parent().parent().addClass("selected")),angular.element($(rows).find(".table-radio-button")).on("change",function(event){$.each(rows,function(){$(this).removeClass("selected"),$(this).find('input[type="radio"]').prop("checked",!1)}),$(this).parent().parent().addClass("selected"),$(this).prop("checked",!0),ngModelController.$setViewValue($(this).val()),$scope.$apply()})}if(this.showcheckBoxColumn){$(this.table).addClass("table-toggle-check-all");var latestChecked,oldView=[],newView=[],rows=this.table.fnGetNodes();$scope.$parent.$eval($attrs.ngModel)&&angular.forEach($scope.$parent.$eval($attrs.ngModel),function(item){$(rows).find("input[id=checkbox_"+item+"]").prop("checked",!0),$(rows).find("input[id=checkbox_"+item+"]").parent().parent().addClass("selected")}),angular.element($(rows).find(".table-check-box")).on("change",function(event){ngModelController.$viewValue?this.checked?($(this).parent().parent().addClass("selected"),oldView=ngModelController.$viewValue,latestChecked=[$(this).val()],newView=_.uniq(oldView.concat(latestChecked)),
ngModelController.$setViewValue(newView)):($(this).parent().parent().removeClass("selected"),newView=_.without(ngModelController.$viewValue,$(this).val()),ngModelController.$setViewValue(newView)):($(this).parent().parent().addClass("selected"),ngModelController.$setViewValue([$(this).val()]));var numCheckBoxes=jqTable.find(".table-check-box").length,numSelectedRows=jqTable.find(".selected").length;numCheckBoxes==numSelectedRows?jqTable.find("thead th input.toggle-check-all").prop("checked",!0):jqTable.find("thead th input.toggle-check-all").prop("checked",!1),"$apply"!=$scope.$root.$$phase&&"$digest"!=$scope.$root.$$phase&&$scope.$apply()}),angular.element(jqTable.find("thead th input.toggle-check-all")).on("change",function(event){this.checked?$.each(jqTable.find(".table-check-box"),function(){0==$(this).prop("checked")&&$(this).click()}):$.each(jqTable.find(".table-check-box"),function(){$(this).prop("checked")&&$(this).click()})}),this.table.bind("draw",function(){var numCheckBoxes=jqTable.find(".table-check-box").length,numSelectedRows=jqTable.find(".selected").length;numCheckBoxes==numSelectedRows?jqTable.find("thead th input.toggle-check-all").prop("checked",!0):jqTable.find("thead th input.toggle-check-all").prop("checked",!1)})}},!0},this.defineTable=function(options){options=_.defaults(options,this.defaultOptions),angular.extend(this.options,options),this.dataTable&&this.dataTable.fnDestroy(),this.dataTable=this.table.dataTable(this.options)},this.adjustColumns=function(){var settings=this.dataTable.fnSettings(),options={},columnsToHide=null;$($window).width()>this.maxBreakpoint&&(this.previousBreakPoint=this.currentBreakPoint,this.currentBreakPoint=-1,columnsToHide=this.responsiveColumnDefs.initial.columns,options={bPaginate:this.responsiveColumnDefs.initial.paging,sDom:this.responsiveColumnDefs.initial.dom,sPaginationType:this.responsiveColumnDefs.initial.pagination,oLanguage:{oPaginate:{sShowPagingText:this.responsiveColumnDefs.initial.showPagingText}}});for(var i=0;i<=this.responsiveColumnDefs.breakpoints.length;i++)if($($window).width()<this.responsiveColumnDefs.breakpoints[i]){this.previousBreakPoint=this.currentBreakPoint,this.currentBreakPoint=this.responsiveColumnDefs.breakpoints[i],columnsToHide=this.responsiveColumnDefs.columns[i],options={bPaginate:this.responsiveColumnDefs.paging[i],sDom:this.responsiveColumnDefs.dom[i],sPaginationType:this.responsiveColumnDefs.pagination[i],oLanguage:{oPaginate:{sShowPagingText:this.responsiveColumnDefs.showPagingText[i]}}};break}if(this.currentBreakPoint!==this.previousBreakPoint){var paginationOptions=angular.merge(this.options,options);this.defineTable(paginationOptions);for(var i=0;i<settings.aoColumns.length;i++)_.contains(columnsToHide,i)?this.dataTable.fnSetColumnVis(i,!1):settings.aoColumns[i].bVisible||this.dataTable.fnSetColumnVis(i,!0);$element.find(".paginator select").addClass("form-control input-sm")}}}],compile:function(iElement,iAttrs){var TEMPLATE_REGEXP=/<.+>/;return{pre:function($scope,iElement,iAttrs,controllers){if($scope.headerTemplate){var headerTemplate=$scope.headerTemplate;headerTemplate&&!TEMPLATE_REGEXP.test(headerTemplate)&&(headerTemplate=$.ajax({type:"GET",url:headerTemplate,async:!1}).responseText),headerTemplate=angular.element(headerTemplate),$compile(headerTemplate)($scope);var table=iElement.find("table"),thead=table.find("thead");thead.exists()?thead.replaceWith(headerTemplate):table.append(headerTemplate)}},post:function($scope,iElement,iAttrs,controllers){var datatableController=controllers[0],ngModelController=controllers[1];datatableController.initialize(ngModelController)&&(datatableController.useResponsiveColumns&&(datatableController.adjustColumns(),angular.element($window).bind("resize",function(){datatableController.adjustColumns(),datatableController.createInputColumn(ngModelController),$scope.$apply()})),datatableController.createInputColumn(ngModelController))}}}}}]),angular.module("WebCoreModule").service("WcDataTableService",["$q",function($q){var clickedRowData={};this.setClickedRowData=function(data){clickedRowData=data},this.getClickedRowData=function(){return $q.when(clickedRowData)}}]),$.extend(!0,$.fn.dataTable.defaults,{sDom:"<'row paginator'<'col-xs-6'l><'col-xs-6'f>r>t<'row paginator'<'col-xs-6'i><'col-xs-6'p>>",sPaginationType:"bootstrap_full_numbers",oLanguage:{sLengthMenu:"Results per page: _MENU_",sInfo:"Showing Results: _START_ - _END_ of _TOTAL_"}}),$.extend($.fn.dataTableExt.oStdClasses,{sWrapper:"dataTables_wrapper form-inline"}),$.extend($.fn.dataTableExt.oPagination,{bootstrap_two_button:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var oLang=oSettings.oLanguage.oPaginate,oClasses=oSettings.oClasses,disabledClass="disabled "+oClasses.sPageButtonStaticDisabled,sAppend='<ul class="pagination"><li class="previous '+disabledClass+'"><a href="javascript:;" class="'+oClasses.sPageButton+" "+oClasses.sPagePrevious+'" tabindex="'+oSettings.iTabIndex+'" role="button"><span class="'+oClasses.sPagePreviousText+'">'+oLang.sPrevious+'</span></a></li><li class="next '+disabledClass+'"><a href="javascript:;" class="'+oClasses.sPageButton+" "+oClasses.sPageNext+'" tabindex="'+oSettings.iTabIndex+'" role="button"><span class="'+oClasses.sPageNextText+'">'+oLang.sNext+"</span></a></li></ul>";$(nPaging).append(sAppend);var els=$("a",nPaging),nPrevious=els[0],nNext=els[1];oSettings.aanFeatures.p||(nPaging.id=oSettings.sTableId+"_paginate",nPrevious.id=oSettings.sTableId+"_previous",nNext.id=oSettings.sTableId+"_next",nPrevious.setAttribute("aria-controls",oSettings.sTableId),nNext.setAttribute("aria-controls",oSettings.sTableId));var fnClickHandler=function(e){e.preventDefault(),oSettings.oApi._fnPageChange(oSettings,e.data.action)&&fnCallbackDraw(oSettings)};oSettings.oApi._fnBindAction(nPrevious,{action:"previous"},fnClickHandler),oSettings.oApi._fnBindAction(nNext,{action:"next"},fnClickHandler)},fnUpdate:function(oSettings,fnCallbackDraw){if(oSettings.aanFeatures.p)for(var iPages=Math.ceil(oSettings.fnRecordsDisplay()/oSettings._iDisplayLength),iCurrentPage=Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength)+1,oClasses=oSettings.oClasses,disabledClass="disabled "+oClasses.sPageButtonStaticDisabled,an=oSettings.aanFeatures.p,i=0;i<an.length;i++)1==iCurrentPage?$("li:eq(0)",an[i]).addClass(disabledClass):$("li:eq(0)",an[i]).removeClass(disabledClass),0===iPages||iCurrentPage===iPages||-1===oSettings._iDisplayLength?$("li:eq(-1)",an[i]).addClass(disabledClass):$("li:eq(-1)",an[i]).removeClass(disabledClass)}},bootstrap_normal:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var oLang=oSettings.oLanguage.oPaginate,oClasses=oSettings.oClasses,disabledClass="disabled "+oClasses.sPageButtonStaticDisabled,sAppend='<ul class="pagination"><li class="previous '+disabledClass+'"><a href="javascript:;" class="'+oClasses.sPageButton+" "+oClasses.sPagePrevious+'" tabindex="'+oSettings.iTabIndex+'" role="button"><span class="'+oClasses.sPagePreviousText+'">'+oLang.sPrevious+'</span></a></li><li class="next '+disabledClass+'"><a href="javascript:;" class="'+oClasses.sPageButton+" "+oClasses.sPageNext+'" tabindex="'+oSettings.iTabIndex+'" role="button"><span class="'+oClasses.sPageNextText+'">'+oLang.sNext+"</span></a></li></ul>";$(nPaging).append(sAppend);var els=$("a",nPaging),nPrevious=els[0],nNext=els[1];oSettings.aanFeatures.p||(nPaging.id=oSettings.sTableId+"_paginate",nPrevious.id=oSettings.sTableId+"_previous",nNext.id=oSettings.sTableId+"_next",nPrevious.setAttribute("aria-controls",oSettings.sTableId),nNext.setAttribute("aria-controls",oSettings.sTableId));var fnClickHandler=function(e){e.preventDefault(),oSettings.oApi._fnPageChange(oSettings,e.data.action)&&fnCallbackDraw(oSettings)};oSettings.oApi._fnBindAction(nPrevious,{action:"previous"},fnClickHandler),oSettings.oApi._fnBindAction(nNext,{action:"next"},fnClickHandler)},fnUpdate:function(oSettings,fnCallbackDraw){if(oSettings.aanFeatures.p){var iStartButton,iEndButton,iPageCount=$.fn.dataTableExt.oPagination.iFullNumbersShowPages,iPageCountHalf=Math.floor(iPageCount/2),iPages=Math.ceil(oSettings.fnRecordsDisplay()/oSettings._iDisplayLength),iCurrentPage=Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength)+1,fnBind=function(j){oSettings.oApi._fnBindAction(this,{page:j+iStartButton-1},function(e){oSettings.oApi._fnPageChange(oSettings,e.data.page),fnCallbackDraw(oSettings),e.preventDefault()})};-1===oSettings._iDisplayLength?(iStartButton=1,iEndButton=1,iCurrentPage=1):iPageCount>iPages?(iStartButton=1,iEndButton=iPages):iPageCountHalf>=iCurrentPage?(iStartButton=1,iEndButton=iPageCount):iCurrentPage>=iPages-iPageCountHalf?(iStartButton=iPages-iPageCount+1,iEndButton=iPages):(iStartButton=iCurrentPage-Math.ceil(iPageCount/2)+1,iEndButton=iStartButton+iPageCount-1);for(var oClasses=oSettings.oClasses,activeClass="active "+oClasses.sPageButtonActive,disabledClass="disabled "+oClasses.sPageButtonStaticDisabled,sList="",i=iStartButton;iEndButton>=i;i++)sList+=iCurrentPage!==i?'<li><a href="javascript:;" class="'+oClasses.sPageButton+'" tabindex="'+oSettings.iTabIndex+'" role="button">'+oSettings.fnFormatNumber(i)+"</a></li>":'<li class="'+activeClass+'"><a href="javascript:;" class="'+oClasses.sPageButton+'" tabindex="'+oSettings.iTabIndex+'" role="button">'+oSettings.fnFormatNumber(i)+"</a></li>";for(var an=oSettings.aanFeatures.p,i=0;i<an.length;i++)an[i].hasChildNodes()&&(1==iCurrentPage?$("li:eq(0)",an[i]).addClass(disabledClass):$("li:eq(0)",an[i]).removeClass(disabledClass),0===iPages||iCurrentPage===iPages||-1===oSettings._iDisplayLength?$("li:eq(-1)",an[i]).addClass(disabledClass):$("li:eq(-1)",an[i]).removeClass(disabledClass),$("li:gt(0)",an[i]).filter(":not(li:eq(-1))").remove(),$(sList).clone().insertBefore($("li:eq(-1)",an[i])).each(fnBind))}}},bootstrap_full_numbers:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var oLang=oSettings.oLanguage.oPaginate,oClasses=oSettings.oClasses,disabledClass="disabled "+oClasses.sPageButtonStaticDisabled,sPageButtonText=oLang.sShowPagingText?"":"text-hide",sPageButton=oLang.sShowPagingText?oClasses.sPageButton:oClasses.sPageButton+" no-text",sAppend='<ul class="pagination"><li class="first '+disabledClass+'"><a href="javascript:;" class="'+sPageButton+" "+oClasses.sPageFirst+'" tabindex="'+oSettings.iTabIndex+'" role="button"><span class="'+sPageButtonText+'">'+oLang.sFirst+'</span></a></li><li class="previous '+disabledClass+'"><a href="javascript:;" class="'+sPageButton+" "+oClasses.sPagePrevious+'" tabindex="'+oSettings.iTabIndex+'" role="button"><span class="'+sPageButtonText+'">'+oLang.sPrevious+'</span></a></li><li class="next '+disabledClass+'"><a href="javascript:;" class="'+sPageButton+" "+oClasses.sPageNext+'" tabindex="'+oSettings.iTabIndex+'" role="button"><span class="'+sPageButtonText+'">'+oLang.sNext+'</span></a></li><li class="last '+disabledClass+'"><a href="javascript:;" class="'+sPageButton+" "+oClasses.sPageLast+'" tabindex="'+oSettings.iTabIndex+'" role="button"><span class="'+sPageButtonText+'">'+oLang.sLast+"</span></a></li></ul>";$(nPaging).append(sAppend);var els=$("a",nPaging),nFirst=els[0],nPrevious=els[1],nNext=els[2],nLast=els[3];oSettings.aanFeatures.p||(nPaging.id=oSettings.sTableId+"_paginate",nFirst.id=oSettings.sTableId+"_first",nPrevious.id=oSettings.sTableId+"_previous",nNext.id=oSettings.sTableId+"_next",nLast.id=oSettings.sTableId+"_last",nFirst.setAttribute("aria-controls",oSettings.sTableId),nPrevious.setAttribute("aria-controls",oSettings.sTableId),nNext.setAttribute("aria-controls",oSettings.sTableId),nLast.setAttribute("aria-controls",oSettings.sTableId));var fnClickHandler=function(e){e.preventDefault(),oSettings.oApi._fnPageChange(oSettings,e.data.action)&&fnCallbackDraw(oSettings)};oSettings.oApi._fnBindAction(nFirst,{action:"first"},fnClickHandler),oSettings.oApi._fnBindAction(nPrevious,{action:"previous"},fnClickHandler),oSettings.oApi._fnBindAction(nNext,{action:"next"},fnClickHandler),oSettings.oApi._fnBindAction(nLast,{action:"last"},fnClickHandler)},fnUpdate:function(oSettings,fnCallbackDraw){if(oSettings.aanFeatures.p){var iStartButton,iEndButton,iPageCount=$.fn.dataTableExt.oPagination.iFullNumbersShowPages,iPageCountHalf=Math.floor(iPageCount/2),iPages=Math.ceil(oSettings.fnRecordsDisplay()/oSettings._iDisplayLength),iCurrentPage=Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength)+1,fnBind=function(j){oSettings.oApi._fnBindAction(this,{page:j+iStartButton-1},function(e){oSettings.oApi._fnPageChange(oSettings,e.data.page),fnCallbackDraw(oSettings),e.preventDefault()})};-1===oSettings._iDisplayLength?(iStartButton=1,iEndButton=1,iCurrentPage=1):iPageCount>iPages?(iStartButton=1,iEndButton=iPages):iPageCountHalf>=iCurrentPage?(iStartButton=1,iEndButton=iPageCount):iCurrentPage>=iPages-iPageCountHalf?(iStartButton=iPages-iPageCount+1,iEndButton=iPages):(iStartButton=iCurrentPage-Math.ceil(iPageCount/2)+1,iEndButton=iStartButton+iPageCount-1);for(var oClasses=oSettings.oClasses,activeClass="active "+oClasses.sPageButtonActive,disabledClass="disabled "+oClasses.sPageButtonStaticDisabled,sList="",i=iStartButton;iEndButton>=i;i++)sList+=iCurrentPage!==i?'<li><a href="javascript:;" class="'+oClasses.sPageButton+'" tabindex="'+oSettings.iTabIndex+'" role="button">'+oSettings.fnFormatNumber(i)+"</a></li>":'<li class="'+activeClass+'"><a href="javascript:;" class="'+oClasses.sPageButton+'" tabindex="'+oSettings.iTabIndex+'" role="button">'+oSettings.fnFormatNumber(i)+"</a></li>";for(var an=oSettings.aanFeatures.p,i=0;i<an.length;i++)an[i].hasChildNodes()&&(1==iCurrentPage?($("li:eq(0)",an[i]).addClass(disabledClass),$("li:eq(1)",an[i]).addClass(disabledClass)):($("li:eq(0)",an[i]).removeClass(disabledClass),$("li:eq(1)",an[i]).removeClass(disabledClass)),0===iPages||iCurrentPage===iPages||-1===oSettings._iDisplayLength?($("li:eq(-1)",an[i]).addClass(disabledClass),$("li:eq(-2)",an[i]).addClass(disabledClass)):($("li:eq(-1)",an[i]).removeClass(disabledClass),$("li:eq(-2)",an[i]).removeClass(disabledClass)),$("li:gt(1)",an[i]).filter(":not(li:eq(-2))").filter(":not(li:eq(-1))").remove(),$(sList).clone().insertBefore($("li:eq(-2)",an[i])).each(fnBind))}}}}),$.fn.DataTable.TableTools&&($.extend(!0,$.fn.DataTable.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn btn-default",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info"},select:{row:"active"}}),$.extend(!0,$.fn.DataTable.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}})),angular.module("WebCoreModule").directive("wcLoadingIndicator",function(){return{restrict:"A",template:'<div id="loading-cover"></div><div id="loading-indicator"><span>Loading...</span></div>',controller:["$scope","WcHttpRequestService",function($scope,WcHttpRequestService){var requestCount=0,pendingStateChange=!1;return this.showLoadingIndicator=function(){$("#loading-cover").show().animate({opacity:1},300),$("#loading-indicator").show().animate({opacity:1},300)},this.hideLoadingIndicator=function(){$("#loading-indicator").hide().animate({opacity:0},10),$("#loading-cover").hide().animate({opacity:0},10)},this.incrementPendingCounterAndShow=angular.bind(this,function(){requestCount++,1===requestCount&&this.showLoadingIndicator()}),this.decrementPendingCounterAndHide=angular.bind(this,function(){requestCount--,0===requestCount&&this.hideLoadingIndicator()}),WcHttpRequestService.addRequestInterceptor(angular.bind(this,function(){arguments[0],arguments[2];this.incrementPendingCounterAndShow()})),WcHttpRequestService.addErrorInterceptor(angular.bind(this,function(){pendingStateChange||this.decrementPendingCounterAndHide()})),WcHttpRequestService.addResponseInterceptor(angular.bind(this,function(){var data=arguments[0];return pendingStateChange||this.decrementPendingCounterAndHide(),data})),$scope.$on("$stateChangeStart",angular.bind(this,function(){pendingStateChange=!0})),this.hideLoadingIndicatorCallback=angular.bind(this,function(){requestCount=0,pendingStateChange=!1,this.hideLoadingIndicator()}),$scope.$on("$stateChangeError",this.hideLoadingIndicatorCallback),$scope.$on("$viewContentLoaded",this.hideLoadingIndicatorCallback),$scope.$on("Unauthenticated",this.hideLoadingIndicatorCallback),$scope.$on("Offline",this.hideLoadingIndicatorCallback),$scope.loadingIndicator=this}]}}),angular.module("WebCoreModule").directive("wcOfflineIndicator",function(){return{restrict:"A",template:'<div id="offline-indicator" class="container-fluid" ng-switch on="checking"><alert type="warning"><span class="glyphicon glyphicon-warning-sign" ng-switch-when="false"></span><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate" ng-switch-when="true"></span><span>{{\'offlineIndicator.offlineMessage\'|translate}} <a href ng-click="checkNetworkState()">{{\'offlineIndicator.retryConnection\'|translate}}</a></span></alert></div>',replace:!0,controller:["WcHttpRequestService","$scope","$window","$timeout","WcTranslateConfiguratorService",function(WcHttpRequestService,$scope,$window,$timeout,WcTranslateConfiguratorService){return WcTranslateConfiguratorService.loadPartAndRefresh("WC-offlineIndicator"),$("#offline-indicator").hide(),$scope.checking=!1,this.showOfflineIndicator=function(){$("#offline-indicator").show();var alertBox=$("#offline-indicator .alert");alertBox.addClass("pulse"),$timeout(function(){alertBox.removeClass("pulse")},2e3),$window.scrollTo(0,1)},this.hideOfflineIndicator=function(){$("#offline-indicator").hide()},this.checkNetworkState=function(){$scope.checking=!0,WcHttpRequestService.getNetworkState().then(function(){$scope.checking=!1})},WcHttpRequestService.addResponseInterceptor(angular.bind(this,function(){this.hideOfflineIndicator()})),$scope.$on("Offline",angular.bind(this,function(){this.showOfflineIndicator()})),$scope.offlineIndicator=this}],link:function(scope,elem,attr,ctrl){scope.checkNetworkState=ctrl.checkNetworkState}}}),angular.module("WebCoreModule").directive("wcChart",function(){return{restrict:"E",scope:{data:"&data",format:"@format",events:"&events",draw:"&draw",options:"&options",responsiveOptions:"&responsiveOptions"},controller:["$scope","$window","$timeout",function($scope,$window,$timeout){if(!$window.Chartist)throw"Missing required dependency - Chartist.js";this.data=$scope.data(),this.format=$scope.format,this.events=$scope.events()||[],this.options=$scope.options()||null,this.responsiveOptions=$scope.responsiveOptions()||null,this.bindEvents=function(chart){this.events.forEach(function(curVal){var eventHandler=function(){curVal.handler(),$timeout(function(){$scope.$apply()})};chart.bind(curVal.name,eventHandler)})},this.render=function($element){return Chartist[this.format]($element,this.data,this.options,this.responsiveOptions)}}],link:function($scope,$element,$attrs,ctrl){var element=$element[0],chart=ctrl.render(element);ctrl.bindEvents($element);var drawFunc=$scope.draw();drawFunc&&chart.on("draw",drawFunc),$scope.$watch(function(){return $scope.data()},function(newData,oldData){newData!==oldData&&chart.update()},!0)}}}),angular.module("WebCoreModule").directive("wcValidationIndicator",function(){return{restrict:"A",priority:1,controller:["$timeout","$translate",function($timeout,$translate){this.timeout=$timeout,this.translate=$translate}],link:{pre:function(scope,elem,attr,ctrl){attr.wcValidationIndicator?ctrl.fieldName=attr.wcValidationIndicator:ctrl.fieldName="Value",attr.invalidText?ctrl.invalidText=attr.invalidText:ctrl.invalidText=ctrl.translate.instant("application.errors.isInvalidError"),attr.requiredText?ctrl.requiredText=attr.requiredText:ctrl.requiredText=ctrl.translate.instant("application.errors.isRequiredError")},post:function(scope,elem,attr,ctrl){ctrl.timeout(function(){elem[0].form&&"FIELDSET"!=elem[0].tagName||(elem=$(elem).find("input"));var ngFormObj,formName=elem[0].form.name;formName.indexOf(".")>-1?(formName=formName.split("."),ngFormObj=scope.$parent[formName[0]][formName[1]]):ngFormObj=scope.$parent[formName];var elemName=elem[0].name;elemName||(elemName=attr.name);var elemCtrl;if(angular.isArray(formName)){var ctrlName=elem[0].attributes["ng-model"].nodeValue.split(".")[0];elemCtrl=scope.$parent[ctrlName]}else elemCtrl=elem.controller();var formGroup=$(elem).closest(".form-group")[0];formGroup||(formGroup=$('<div class="form-group"></div>').insertBefore("#"+elem.context.attributes.id.value));var invalidMessage=ctrl.invalidText+" "+ctrl.fieldName+".",requiredMessage=ctrl.fieldName+" "+ctrl.requiredText,elemNameSnakeCase=elemName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),invalidId=elemNameSnakeCase+"-invalid",requiredId=elemNameSnakeCase+"-required",invalidMessageDOM=$('<span id="'+invalidId+'" class="label label-danger"><span class="glyphicon glyphicon-remove-sign"></span><span class="label-text">'+invalidMessage+"</span></span>"),requiredMessageDOM=$('<span id="'+requiredId+'" class="label label-danger"><span class="glyphicon glyphicon-remove-sign"></span><span class="label-text">'+requiredMessage+"</span></span>"),watchListener=function(){!ngFormObj[elemName].$valid&&elemCtrl.isFormSubmitted?(ngFormObj[elemName].$error.required===!0?($(formGroup).find("#"+invalidId).remove(),$(formGroup).append(requiredMessageDOM)):($(formGroup).find("#"+requiredId).remove(),$(formGroup).append(invalidMessageDOM)),$(formGroup).addClass("has-error")):($(formGroup).removeClass("has-error"),$(formGroup).find("#"+invalidId+", #"+requiredId).remove())};scope.$watch(function(){return ngFormObj[elemName].$valid},function(){watchListener()}),scope.$watch(function(){return elemCtrl.isFormSubmitted},function(){watchListener()}),scope.$watch(function(){return ngFormObj[elemName].$error},function(){watchListener()},!0)},0)}}}}),angular.module("WebCoreModule").directive("wcContinueIfValid",function(){return{restrict:"A",required:"^ngController",controller:["$state","$timeout",function($state,$timeout){this.$state=$state,this.$timeout=$timeout}],link:function(scope,elem,attr,ctrl){elem.on("click",function(){var elemCtrl=elem.controller(),formName=elem[0].form.name,formCtrl=scope.$parent[formName];if(elemCtrl.isFormSubmitted=!0,formCtrl.$valid){var workflowData=ctrl.$state.$current.data.workflow;workflowData.controllerContinueCallbackFunctionName&&elemCtrl[workflowData.controllerContinueCallbackFunctionName](),ctrl.$state.go(workflowData.nextState)}ctrl.$timeout(function(){scope.$apply()})})}}}),angular.module("WebCoreModule").directive("wcClickOnce",["$timeout",function($timeout){var delay=500;return{restrict:"A",priority:-1,link:function(scope,elem){var disabled=!1,onClick=function(evt){disabled?(evt.preventDefault(),evt.stopImmediatePropagation()):(disabled=!0,$timeout(function(){disabled=!1},delay,!1))};scope.$on("$destroy",function(){elem.off("click",onClick)}),elem.on("click",onClick)}}}]),angular.module("WebCoreModule").directive("wcNavMenu",["$compile",function($compile){return{restrict:"A",scope:{menuData:"=menuData",menuDataUrl:"@menuDataUrl"},transclude:!0,templateUrl:"webCore/directives/wcNavMenuDirective/wcNavMenuDirectiveTemplate.html",controller:["$scope","$element","$attrs","$http",function($scope,$element,$attrs,$http){$http.get($scope.menuDataUrl).success(function(response){$scope.menuData=response}),$scope.$on("$stateChangeStart",function(){$("nav .in, nav .open").removeClass("in open")}),$scope.$on("collapseNavBar",function(){$scope.collapseNavbar()}),$scope.navbarCollapsed=!0,$scope.toggleNavbarCollpase=function(){$scope.navbarCollapsed=!$scope.navbarCollapsed,$scope.navbarCollapsed?$("button.navbar-toggle").attr("aria-expanded","false"):$("button.navbar-toggle").attr("aria-expanded","true")},$scope.collapseNavbar=function(){$scope.navbarCollapsed||$scope.toggleNavbarCollpase()}}]}}]).directive("subNavigationTree",["$compile",function($compile){return{restrict:"E",scope:!0,link:function(scope,element,attrs){if(scope.tree=scope.node,scope.tree.children&&scope.tree.children.length){var template=angular.element('<ul class="dropdown-menu "><li wc-protected-resource="{{node.protected}}" ng-repeat="node in tree.children"><a ui-sref="{{node.state | translate}}" ui-sref-opts="{reload: true, notify: true}">{{node.text | translate}}</a><sub-navigation-tree tree="node"></sub-navigation-tree></li></ul>'),linkFunction=$compile(template);linkFunction(scope),element.replaceWith(template)}else element.remove()}}}]),angular.module("WebCoreModule").directive("wcPagination",["$templateCache","$compile",function($templateCache,$compile){return{restrict:"A",priority:1,scope:{wcPagination:"=",location:"@",resultsPerPage:"&",resultsPerPageText:"@",showingResultsText:"@",resultsItemCount:"&",responsiveBreakpoints:"&"},controller:["$scope","$window","_",function($scope,$window,_){$scope.searchResults=$scope.wcPagination,angular.isArray($scope.resultsPerPage())?$scope.resultsPerPage=$scope.resultsPerPage():$scope.resultsPerPage=[10,25,50,100],angular.isArray($scope.responsiveBreakpoints())?$scope.responsiveBreakpoints=$scope.responsiveBreakpoints():$scope.responsiveBreakpoints=[430,500,600,900],$scope.resultsPerPageText||($scope.resultsPerPageText="Results per page: "),$scope.showingResultsText||($scope.showingResultsText="Showing results "),angular.isNumber($scope.resultsItemCount())?$scope.resultsItemCount=$scope.resultsItemCount():$scope.resultsItemCount=$scope.resultsPerPage[0],$scope.totalItems=$scope.searchResults.length,$scope.itemsPerPage=$scope.resultsItemCount,$scope.currentPage=1,$scope.boundaryLinks=!0,$scope.maxSize=5,$scope.filteredSearchResults=[],$scope.updatePageResultsCount=function(){$scope.itemsPerPage=$scope.resultsItemCount},$scope.begin=1,$scope.end=$scope.begin+$scope.itemsPerPage,$scope.$watchCollection(function(){return $scope.currentPage+$scope.itemsPerPage},function(){$scope.begin=($scope.currentPage-1)*$scope.itemsPerPage,$scope.end=$scope.begin+$scope.itemsPerPage,$scope.end>$scope.totalItems&&($scope.end=$scope.totalItems),$scope.wcPagination=$scope.searchResults.slice($scope.begin,$scope.end),$window.scrollTo(0,1)}),$scope.currentBreakpoint="",$scope.$watch(function(){return $scope.currentBreakpoint},function(newValue,oldValue){newValue!=oldValue&&("xs"==newValue?($(".pagination-row").addClass("hidden"),$scope.itemsPerPage=$scope.searchResults.length,$scope.maxSize=0,$scope.boundaryLinks=!1):"sm"==newValue?($(".pagination-row").removeClass("hidden"),$scope.itemsPerPage=$scope.resultsItemCount,$scope.maxSize=0,$scope.boundaryLinks=!1):"md"==newValue?($(".pagination-row").removeClass("hidden"),$scope.itemsPerPage=$scope.resultsItemCount,$scope.maxSize=0,$scope.boundaryLinks=!1):"lg"==newValue?($(".pagination-row").removeClass("hidden"),$scope.itemsPerPage=$scope.resultsItemCount,$scope.maxSize=1,$scope.boundaryLinks=!0):($scope.maxSize=5,$scope.boundaryLinks=!0))});var resizeHandler=function(){window.innerWidth<=$scope.responsiveBreakpoints[0]&&"xs"!=$scope.currentBreakpoint?($scope.currentBreakpoint="xs",$scope.$apply()):window.innerWidth>$scope.responsiveBreakpoints[0]&&window.innerWidth<=$scope.responsiveBreakpoints[1]&&"sm"!=$scope.currentBreakpoint?($scope.currentBreakpoint="sm",$scope.$apply()):window.innerWidth>$scope.responsiveBreakpoints[1]&&window.innerWidth<=$scope.responsiveBreakpoints[2]&&"md"!=$scope.currentBreakpoint?($scope.currentBreakpoint="md",$scope.$apply()):window.innerWidth>$scope.responsiveBreakpoints[2]&&window.innerWidth<=$scope.responsiveBreakpoints[3]&&"lg"!=$scope.currentBreakpoint?($scope.currentBreakpoint="lg",$scope.$apply()):window.innerWidth>$scope.responsiveBreakpoints[3]&&"xl"!=$scope.currentBreakpoint&&($scope.currentBreakpoint="xl",$scope.$apply())};angular.element($window).bind("resize",_.debounce(resizeHandler,300)),setTimeout(resizeHandler,0)}],link:function(scope,elem,attr,ctrl){var template='<div class="row pagination-row"><div class="col-sm-4 col-xs-6"><label for="results-per-page" class="control-label">{{resultsPerPageText}}</label><select ng-model="resultsItemCount" ng-options="result for result in resultsPerPage" id="results-per-page" name="resultsPerPage" ng-change="updatePageResultsCount();"></select></div><div class="col-sm-4 hidden-xs text-center results-data">{{showingResultsText}} {{begin+1}}-{{end}} of {{totalItems}}</div><div class="col-sm-4 col-xs-6 text-right"><pagination total-items="totalItems" items-per-page="resultsItemCount" ng-model="currentPage" max-size="maxSize" boundary-links="boundaryLinks" previous-text="&#xe071" next-text="&#xe075" first-text="&#xe069" last-text="&#xe077"></pagination></div></div>';("top"==scope.location||"both"==scope.location)&&elem.before($compile(template)(scope)),("bottom"==scope.location||"both"==scope.location)&&elem.after($compile(template)(scope))}}}]),angular.module("WebCoreModule").filter("WcPrice",["_",function(_){function detectFilterType(min,max){var filterType="";return filterType=!min&&0!==min||!max&&0!==max?min&&null===max?"min":max&&null===min?"max":"invalid":"range"}function filterMax(items,max,propertyName){return propertyName?_.filter(items,function(num){return num[propertyName]<=max?!0:void 0}):_.filter(items,function(num){return max>=num?!0:void 0})}function filterMin(items,min,propertyName){return propertyName?_.filter(items,function(num){return num[propertyName]>=min?!0:void 0}):_.filter(items,function(num){return num>=min?!0:void 0})}function filterRange(items,min,max,propertyName){return propertyName?_.filter(items,function(num){return num[propertyName]>=min&&num[propertyName]<=max?!0:void 0}):_.filter(items,function(num){return num>=min&&max>=num?!0:void 0})}return function(items,min,max,propertyName){var newItems=[];(void 0===min||isNaN(min))&&(min=null),(void 0===max||isNaN(max))&&(max=null);var filterType=detectFilterType(min,max);switch(filterType){case"range":newItems=filterRange(items,min,max,propertyName);break;case"min":newItems=filterMin(items,min,propertyName);break;case"max":newItems=filterMax(items,max,propertyName);break;case"invalid":newItems=items}return newItems}}]);